import{r as m,j as o}from"./index-CG7AszW8.js";function K({id:s,name:r,label:c,hint:i,value:a,onChange:e,onBlur:h,error:u,touched:j,type:b="number",min:N,max:v,step:g,required:d=!0,icon:t,prefix:n,suffix:l,className:f="",disabled:x=!1}){const[C,w]=m.useState(!1),$=j&&u,y=j&&!u&&a!==""&&a!==void 0,E=()=>w(!0),F=p=>{w(!1),h?.(p)},V=p=>{b!=="number"||["Backspace","Delete","Tab","ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Home","End","Enter","."].includes(p.key)||p.ctrlKey||p.metaKey||/[0-9]/.test(p.key)||p.preventDefault()},A=p=>{if(b!=="number")return;const k=p.clipboardData.getData("text");/^[\d.\-]+$/.test(k)||p.preventDefault()};return o.jsxs("div",{className:`vi-group ${$?"vi-error":""} ${y?"vi-valid":""} ${C?"vi-focused":""} ${f}`,children:[o.jsxs("label",{htmlFor:s||r,className:"vi-label",children:[t&&o.jsx("span",{className:"vi-label-icon",children:t}),c,i&&o.jsx("span",{className:"vi-hint",children:i})]}),o.jsxs("div",{className:"vi-input-wrap",children:[n&&o.jsx("span",{className:"vi-prefix",children:n}),o.jsx("input",{id:s||r,name:r,type:"text",inputMode:b==="number"?"decimal":"text",className:`vi-input${n?" has-prefix":""}${l?" has-suffix":""}`,value:a,onChange:e,onFocus:E,onBlur:F,onKeyDown:V,onPaste:A,min:N,max:v,step:g||"any",required:d,disabled:x,autoComplete:"off"}),l&&o.jsx("span",{className:"vi-suffix",children:l}),o.jsxs("div",{className:"vi-state-icon",children:[$&&o.jsx("span",{className:"vi-icon-error",children:"!"}),y&&o.jsx("span",{className:"vi-icon-valid",children:"âœ“"})]})]}),$&&o.jsx("p",{className:"vi-error-msg",children:u})]})}function S(s,{min:r,max:c,allowDecimal:i=!0,allowNegative:a=!1}={}){if(s===""||s===void 0||s===null)return"";let e=String(s),h=a?/[^0-9.-]/g:/[^0-9.]/g;if(e=e.replace(h,""),i){const u=e.split(".");u.length>2&&(e=u[0]+"."+u.slice(1).join(""))}else e=e.replace(/\./g,"");return a&&e.indexOf("-")>0&&(e=e.replace(/-/g,"")),e}function D(s,{min:r,max:c,required:i=!0,fieldName:a="Value"}={}){if(s===""||s===void 0||s===null)return i?`${a} is required`:null;const e=parseFloat(s);return isNaN(e)?`${a} must be a valid number`:r!==void 0&&e<r?`${a} must be at least ${r}`:c!==void 0&&e>c?`${a} must be at most ${c}`:null}function I(s,r={}){const[c,i]=m.useState(s),[a,e]=m.useState({}),[h,u]=m.useState({}),j=m.useCallback(d=>{const{name:t,value:n}=d.target,l=r[t]||{},f=l.type==="text"?n:S(n,l);i(x=>({...x,[t]:f})),a[t]&&e(x=>({...x,[t]:null}))},[r,a]),b=m.useCallback(d=>{const{name:t}=d.target;u(f=>({...f,[t]:!0}));const n=r[t]||{},l=n.type==="text"?null:D(c[t],{...n,fieldName:n.label||t});e(f=>({...f,[t]:l}))},[r,c]),N=m.useCallback(()=>{const d={};let t=!0;for(const[n,l]of Object.entries(r)){if(l.type==="text")continue;const f=D(c[n],{...l,fieldName:l.label||n});f&&(d[n]=f,t=!1)}return e(d),u(Object.keys(r).reduce((n,l)=>({...n,[l]:!0}),{})),t},[r,c]),v=m.useCallback(d=>{const t=parseFloat(c[d]);return isNaN(t)?0:t},[c]),g=m.useCallback(()=>{i(s),e({}),u({})},[s]);return{values:c,errors:a,touched:h,handleChange:j,handleBlur:b,validateAll:N,getNumericValue:v,setValues:i,setErrors:e,resetForm:g}}export{K as V,I as u};
